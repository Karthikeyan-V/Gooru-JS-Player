var GOORU_REST_ENDPOINT=("https:"==document.location.protocol?"https://":"http://")+"qa.goorulearning.org/gooruapi/rest";var DOC_HOME=("https:"==document.location.protocol?"https://":"http://")+"//qa.goorulearning.org/doc/a/view";var DOC_CACHE=("https:"==document.location.protocol?"https://":"http://")+"qa";var HOME_URL="//sheeban.goorulearning.org/p";var USER={sessionToken:"2397d31f-20a6-4e3b-a993-ab7ee1d7b0c1"};var GOORU_PROFILE_S3_URL=("https:"==document.location.protocol?"https://":"http://")+"//profile-demo.s3.amazonaws.com/profile-qa/";var STATIC_FILE_PATH=("https:"==document.location.protocol?"https://":"http://")+"//sheeban.goorulearning.org/p";var BUILD_TIME_STAMP="14042212";var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-20089789-1"]);_gaq.push(["_setDomainName","goorulearning.org"]);_gaq.push(["_trackPageview"]);(function(){var B=document.createElement("script");B.type="text/javascript";B.async=true;B.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var A=document.getElementsByTagName("script")[0];A.parentNode.insertBefore(B,A)})();var resourcePlayers={youtubeVideo:function(C,D,B){var A=new SWFObject(("https:"==document.location.protocol?"https://":"http://")+"//www.youtube.com/v/"+C+"?fs=1&amp;rel=0&amp;enablejsapi=1&amp;version=3&amp;playerapiid=youtubeMovie-"+B+"&amp;autoplay=1&amp;start="+D,"youtubeMovie-"+B,"100%","99%","8","#111111");A.addParam("height","99%");A.addParam("width","100%");A.addParam("movie","http://www.youtube.com/v/"+C+"?fs=1&amp;rel=0&amp;enablejsapi=1&amp;version=3&amp;playerapiid=youtubeMovie-"+B+"&amp;autoplay=1&amp;start="+D);A.addParam("allowfullscreen","true");A.addParam("allowscriptaccess","always");A.addParam("autoplay","1");A.addParam("class","maximise videoPlayerContainer");A.setAttribute("autoplay","1");A.addParam("wmode","transparent");A.write(B)},animation:function(A,B){if(resourcePlayers.hasFlashPluginInstall()){var C=new SWFObject(A,"mainmovie","100%","100%","8","#FFFFFF");C.addParam("menu","false");C.addParam("wmode","transparent");C.addParam("height","100%");C.addParam("width","100%");C.addParam("allowscriptaccess","always");C.addParam("class","maximise animationContainer");C.write(B)}else{var D=new EJS({url:STATIC_FILE_PATH+"/templates/resources/resourcePlayerInfo.template"}).render({message:'<span class="installFlashSpan">Flash player is needed to display this content....!</span> <a href="http://www.adobe.com/support/flashplayer/downloads.html" target="_blank">Install Plugin</a>',reduceSize:176});$("div.resourcePreviewBoxContentContainer").html(D)}},flvPlayer:function(A,B){flowplayer(B,A)},questionResource:function(A,B){if(A.questionType!=""&&typeof A.questionType!="undefined"){if(A.questionType=="MC"||A.questionType=="T/F"||A.questionType==1||A.questionType==3){var D=new EJS({url:STATIC_FILE_PATH+"/templates/resources/question/resourceQuestionMCQ.template"}).render({data:A})}if(A.questionType=="FIB"||A.questionType==4){var D=new EJS({url:STATIC_FILE_PATH+"/templates/resources/question/resourceQuestionFIB.template"}).render({data:A});console.log(D)}if(A.questionType=="OE"||A.questionType==6){var D=new EJS({url:STATIC_FILE_PATH+"/templates/resources/question/resourceQuestionOE.template"}).render({data:A})}$(B).html(D);$("input.gooru-answer-container").live("click",function(){if($(this).data("question-type")=="MC"||$(this).data("question-type")=="T/F"||$(this).data("question-type")=="1"||$(this).data("question-type")=="3"){$(".multiple-choice-answer-marker-"+$('input[name="gooru-mcq"]:checked').data("radio-option-value")).css("visibility","visible");$('input[name="gooru-mcq"]').not(":checked").each(function(){$(".multiple-choice-answer-marker-"+$(this).data("radio-option-value")).css("visibility","hidden")})}else{if($(this).data("question-type")=="FIB"||$(this).data("question-type")=="4"){var F=[];var I=[];var E=0;var G=0;$("label#fib-answer-list").each(function(){F[E]=$(this).data("fib-answer-text-"+E);E++});$("input.fib-answer").each(function(){I[G]=$(this).val();G++});for(var H in F){if(F[H]==I[H]){$("input#answer-"+H).css({border:"solid #4E9646 2px","background-color":"#D5E6D2"})}else{if(F[H]!=I[H]){$("input#answer-"+H).css({border:"solid #FBB03B 2px","background-color":"#FEE8C7"});$(".gooru-question-fib-answer-slate").show();$("#gooru-fib-marked-answer-list-"+H).show()}}}$(this).prop("disabled",true);$("input.fib-answer").attr("disabled","disabled")}else{if($(this).data("question-type")=="OE"||$(this).data("question-type")=="6"){$("div#gooru-oe-submited-answer").text($("textarea#gooru-oe-answer-submit").val());$("div#gooru-oe-submited-answer").show();$("textarea#gooru-oe-answer-submit, input#gooru-oe-save-button").hide()}}}$("input.gooru-answer-container").addClass("gooru-default-grey-disable-button");$("input.gooru-answer-container").removeClass("gooru-default-blue-button")});var C=0;$("#gooru-question-hint-button").live("click",function(){var E=parseInt((($(this).val()).substring(7,9)).trim());if(E==1){$(this).addClass("gooru-question-deactive-button-font");$(this).removeClass("gooru-question-active-button-font")}if(E!=0){E--;$(this).val("Hints ("+E+" Left)")}$(".gooru-question-hint-container-"+C).css("display","block");C++});$("#gooru-question-explanation-button").live("click",function(){$(".gooru-question-explanation-container").css("display","block");$(this).addClass("gooru-question-deactive-button-font");$(this).removeClass("gooru-question-active-button-font")});$("input.gooru-mcq-radio-button , input.fib-answer , textarea#gooru-oe-answer-submit").live("click",function(){$("input.gooru-answer-container").removeClass("gooru-default-grey-disable-button");$("input.gooru-answer-container").addClass("gooru-default-blue-button")})}},pdfReader:function(C,F,B,E){var A=scribd.Document.getDoc(C,F);var D=function(G){A.api.setPage(B)};A.addParam("jsapi_version",2);A.addEventListener("iPaperReady",D);this._doc=A;A.write(E)},muteAllVideo:function(B,A){$(B).each(function(){try{if(A==null||!$(this).hasClass(A)){$(this).find(".resourceYoutubeplayerContainer").find("embed").get(0).mute();$(this).find(".resourceYoutubeplayerContainer").find("embed").get(0).pauseVideo()}}catch(C){}})},triggerStopVideo:function(B,A){if(B!=null){if(A>0){INTERVAL=setInterval(function(){if(B!=null){try{if(Math.floor(B.getCurrentTime())>=A){B.pauseVideo();clearInterval(INTERVAL)}}catch(C){clearInterval(INTERVAL)}}},1000)}}},playVideo:function(C,A){try{C.playVideo();resourcePlayers.triggerStopVideo(C,A)}catch(B){}},hasFlashPluginInstall:function(){var A=false;try{var B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(B){A=true}}catch(C){if(navigator.mimeTypes["application/x-shockwave-flash"]!=undefined){A=true}}return A}};var helper={getYoutubeVideoId:function(B){var A="youtu(?:.be|be.com)/(?:.*v(?:/|=)|(?:.*/)?)([a-zA-Z0-9-_]+)";var C=B.match(A);return(C!=null)?C[1]:null},isWebResource:function(B,C){if(typeof C!="undefined"&&C=="video/youtube"){var A=new RegExp("((http|https)://)?(www.)?(youtube.com)(/)?([a-zA-Z0-9-.]+)/?");return A.test(B)}else{var A=new RegExp(/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})(\/\S*)?$/);return A.test(B)}},isSignedResource:function(B,C){if(typeof C!="undefined"&&C=="video/youtube"){var A=new RegExp("((http|https)://)?(www.)?(youtube.com)(/)?([a-zA-Z0-9-.]+)/?");return A.test(B)}else{var A=new RegExp("((http|https)://)[a-zA-Z0-9-.]+.[a-zA-Z]{2,3}(/S*)?");return A.test(B)}},getResourceFileExtenstion:function(A){var B=A.split(".")[A.split(".").length-1];return B.toLowerCase()},userSignin:function(A){var D=helper.getRequestParam();EJS.ext=".template";if(typeof (D.api_key)=="undefined"||D.api_key==""){var C=new EJS({url:STATIC_FILE_PATH+"/templates/resources/resourcePlayerInfo.template"}).render({message:'<span>Required API Key for play this resource. You do not have API Key, please send request by clicking this link </span> <a href="http://developers.goorulearning.org/request-a-key" target="_blank">Request API Key</a>',reduceSize:0});$("div.gooru-player-GOORU_REST_ENDPOINTbase-container").html(C);return }var B={userName:null,password:null,isGuestUser:true,onComplete:function(E){}};var A=$.extend(B,A);$.ajax({type:"POST",url:GOORU_REST_ENDPOINT+"/v2/account/loginas/anonymous",cache:false,data:{apiKey:D.api_key},dataType:"json",success:function(E){A.onComplete(E)},error:function(F){var E=F.responseText.split(":");var G=new EJS({url:STATIC_FILE_PATH+"/templates/resources/resourcePlayerInfo.template"}).render({message:E[1]+' For new API Key, please send request by clicking this link <a href="http://developers.goorulearning.org/request-a-key" target="_blank">Request API Key</a>',reduceSize:0});$("div.gooru-player-base-container").html(G)}})},getRequestParam:function(){var A=window.location.search.substring(1),E=A.split("&"),D={};for(var B=0;B<E.length;B++){var C=E[B].split("=");D[unescape(C[0])]=unescape(C[1])}return D},calculateTime:function(A){var C=0;splitArray=A.split(":");C=splitArray.length;for(var D=C-1,B=1,E=0;D>=0;D=D-1,B=B*60){E+=splitArray[D]*B-0}return E},formThumbailName:function(E,A){var C=null;if(typeof (E)!="undefined"&&E!=null){var D=E.split(".").pop();var B=E.split("."+D)[0];C=B+A+D}return C},previewToolTip:function(B,A){$(B).bt({preBuild:function(){var G=$(this).attr("description");var F=$(this).data("code");var D="<div class='code-popup-title'>"+F+"</div><div class='CodePopUpDescription'>"+G+"</div>";if($(this).hasClass("resourcePreviewLicense")){var I=$(this).attr("licenseCode");var E=$(this).attr("licenseName");var H=" ";if(I!=null&&I!=""){E=E+"("+I+")";H=$(this).attr("licenseUrl")}D="<div><b><div><a href='"+H+"' target='_blank'>"+E+"</a></div></b><div>"+G+"</div></div>"}else{if($(this).hasClass("resourcePreviewLicenseTagOER")){var C=$(this).attr("oerTitle");D="<div><b><div><a href='http://www.oercommons.org' target='_blank'>"+C+"</a></div></b><div>"+G+"</div></div>"}}$("#standardDescToolTip").remove();$(this).append("<div  style='display:none; visibility: visible;'  id='standardDescToolTip'>"+D+"</div>")},hoverIntentOpts:{interval:300,timeout:300},contentSelector:'$("#standardDescToolTip").html()',positions:[A],closeWhenOthersOpen:true,clickAnywhereToClose:true,spikeGirth:25,spikeLength:8,cornerRadius:8,fill:"#ffffff",strokeStyle:"#cccccc"})},youtubeImageLink:function(A){return"http://img.youtube.com/vi/"+helper.getYoutubeVideoId(A)+"/1.jpg"},getYoutubeVideoId:function(B){var A="youtu(?:.be|be.com)/(?:.*v(?:/|=)|(?:.*/)?)([a-zA-Z0-9-_]+)";var C=B.match(A);return(C!=null)?C[1]:null},onErrorDefaultImage:function(){$("img.resource-img-slide").unbind("error").error(function(){var D=$(this).data("category");D=D.toLowerCase();var C="";var B=$(this).data("resourceurl");var F=helper.getResourceFileExtenstion(B).toLowerCase();var G="";if(F=="pdf"){if(helper.isSignedResource(B)){G=("https:"==document.location.protocol?"https://":"http://")+"docs.google.com/gview?url="+B+"&a=bi&w=80&h=100&pagenumber=1"}else{var A=$(this).data("resourcefolder");var E=$(this).data("asseturi");G=("https:"==document.location.protocol?"https://":"http://")+"docs.google.com/gview?url="+E+"/"+A+B+"&a=bi&w=80&h=100&pagenumber=1"}$(this).attr("src",G);$(this).unbind("error").error(function(){$(this).parent(".default-image-div").addClass("resource-default-image");$(this).hide();C=D+"-default-image";$(this).parent(".default-image-div").removeClass(C).addClass(C)})}else{$(this).parent(".default-image-div").addClass("resource-default-image");$(this).hide();C=D+"-default-image";$(this).parent(".default-image-div").removeClass(C).addClass(C)}})},updateResourceViews:function(B,A){$.ajax({type:"POST",url:GOORU_REST_ENDPOINT+"/resource/update/views/"+B+".json",data:{resourceViews:A},success:function(C){},error:function(C,E,D){}})},roundedCornerForIE:function(){if($.browser.msie&&window.PIE){$(".ie-rounded-corner").each(function(){PIE.attach(this)})}}};var activityLog={init:function(A){$.ajax({type:"POST",url:GOORU_REST_ENDPOINT+"/activity/log/"+A.eventId+"/"+A.type,data:{contentGooruOid:A.contentGooruOid,eventName:A.eventName,parentGooruOid:A.parentGooruOid,context:A.context},success:function(B){}})},triggerActivityLog:function(G,F,E,A,D,C,H){if(typeof (G)!="undefined"&&typeof (E)!="undefined"){var B={eventId:G,type:F,contentGooruOid:E,eventName:A,parentGooruOid:D,contex:C};$("div.gooru-player-base-container").trigger("activity.log",[H,B])}}};var generateGUID=(typeof (window.crypto)!="undefined"&&typeof (window.crypto.getRandomValues)!="undefined")?function(){var B=new Uint16Array(8);window.crypto.getRandomValues(B);var A=function(D){var C=D.toString(16);while(C.length<4){C="0"+C}return C};return(A(B[0])+A(B[1])+"-"+A(B[2])+"-"+A(B[3])+"-"+A(B[4])+"-"+A(B[5])+A(B[6])+A(B[7]))}:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(C){var B=Math.random()*16|0,A=C=="x"?B:(B&3|8);return A.toString(16)})};